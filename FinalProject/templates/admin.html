{% extends 'base.html' %}
{% block content %}
<h3>Admin Dashboard</h3>
<table class="table">
  <thead><tr><th>ID</th><th>Type</th><th>Category</th><th>Location</th><th>Status</th><th>Action</th></tr></thead>
  <tbody>
    {% for r in reports %}
    <tr>
      <td>{{ r.report_id }}</td>
      <td>{{ r.report_type }}</td>
      <td>{{ r.item.category }}</td>
      <td>{{ r.location }}</td>
      <td>{{ r.status }}</td>
      <td>
        <form method="post" action="{{ url_for('update_status', report_id=r.report_id) }}" class="d-inline">
          <select name="status" class="form-select form-select-sm d-inline-block" style="width:140px">
            <option value="pending" {% if r.status=='pending' %}selected{% endif %}>pending</option>
            <option value="matched" {% if r.status=='matched' %}selected{% endif %}>matched</option>
            <option value="claimed" {% if r.status=='claimed' %}selected{% endif %}>claimed</option>
          </select>
          <button class="btn btn-sm btn-primary">Update</button>
        </form>
        {% if current_user.role == 'staff' %}
        <form method="post" action="{{ url_for('delete_report', report_id=r.report_id) }}" class="d-inline ms-2" onsubmit="return confirm('Are you sure you want to delete this report?');">
          <button class="btn btn-sm btn-danger">Delete</button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
